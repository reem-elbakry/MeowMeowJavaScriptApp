{"version":3,"sources":["main.js"],"names":["catsContainer","document","getElementById","API_KEY","async","fetchWithTimeout","resource","options","timeout","AbortController","controller","setTimeout","abort","timeoutId","signal","clearTimeout","fetch","json","error","console","fetchCatsData","response","await","log","loadCatImage","url","resolve","reject","image","Image","src","onload","onerror","Error","loadCatsImages","imagesPromises","map","cat","Promise","allSettled","createCatCardElement","value","createCatCard","let","catCardContainer","createElement","catCard","classList","add","catCardBody","createCatCardImage","catCardImage","alt","catCardActionContainer","catCardActionIcon","appendChild","id"],"mappings":"AACA,MAAMA,cAAgBC,SAASC,eAAe,gBAAgB,EAExDC,QAAU,wEAGhBC,eACQC,iBAAAC,EAAAC,EAAA,IACA,IAAOC,GAAO,CAAAA,QAAAA,EAAG,GAAA,EAAAD,EAAQA,MAAAA,EAAO,IAAAE,gBAChC,IAAMC,EAAaC,WAAIF,IAAeC,EAAEE,MAAAJ,CAAA,EAClCK,EAAYF,MAAAA,MAAWL,EAAKI,CAAU,GAACE,EAAQJ,OAAQE,EAAAI,MAAA,CAAA,EACpB,OAAzCC,aAAiBF,CAAMG,EAAqBT,EAAOU,KAAA,CAEnD,CAFqDH,MAAMI,GAAsBC,QAAAD,MAAA,uBAAAA,CAAA,CAEjF,CAKR,CAGAd,eAJIgB,gBACJ,IAKQ,IAAMC,EAAWC,MAAMjB,iBAAkB,6EAA4EF,QAAW,MAAO,CAACK,QAAS,GAAI,CAAC,EAF9J,OADAW,QAAAI,IAAAF,CAAA,EACeD,CAOX,CANI,MAAAF,GACAC,QAAME,MAAW,uBAAwBH,CAAA,CAK7C,CACJ,CAGA,SANMM,aAAcC,GACZN,OAAO,IAACD,QAAM,CAAAQ,EAAAC,KAClB,MAAAC,EAAA,IAAAC,MACJD,EAAAE,IAAAL,EAOQG,EAAMG,OAAS,IAAML,EAAQE,CAAK,EAL1CA,EAAAI,QAAA,IAAAL,EAAA,IAAAM,MAAA,6BAAAR,CAAA,CAAA,CACA,CAAA,CAOA,CAEArB,eANiB8B,iBACTN,IACAA,IACFO,GADkBb,MAAMK,cAAWM,GACnCG,IAAAC,GAAAb,aAAAa,EAAAZ,GAAA,CAAA,GACNH,MAAAgB,QAAAC,WAAAJ,CAAA,GAEeD,QAAAA,GAAiBM,qBAAAZ,EAAAa,KAAA,CAAA,CAGxB,CAFA,MAAAvB,GACAC,QAAUD,MAAGA,CAAME,CACnB,CAMR,CAIA,SALIsB,gBACJC,IAAAC,EAAA3C,SAAA4C,cAAA,KAAA,EAIAC,GAEIF,EAAiBG,UAAUC,IAAI,WAAY,WAAY,OAAQ,UAAW,MAAM,EAF3EN,SAAgBG,cAAA,KAAA,GAIjBC,GAHJA,EAAIF,UAAgBI,IAAG/C,OAAS4C,YAAa,WAAO,UAAA,QAAA,QAAA,EAGtC5C,SAAS4C,cAAoB,KAAA,GAI3CI,OAHAH,EAAQC,UAAcC,IAAM,YAAa,KAAE,EAG3CC,CAAAA,EAA0BH,EAAWG,EAGzC,CAEA,SAASC,mBAAmBC,GAK5B,OAJIA,EAAaJ,UAAUC,IAAI,YAAa,iBAAkB,QAAS,QAAS,SAAU,SAAS,cAAe,EAC9GG,EAAaC,IAAM,OAGvBD,CAEA,CAAA,SAEIE,0BAEAV,IAAIW,EAAwBzB,SAAYgB,cAAC,KAAA,EAGzCS,GAFAA,EAAkBP,UAAcC,IAAA,KAAW,EAEnB,IAAMnB,MAAA,GAAA,EAAA,GAU9B,OATAyB,EAAoBP,UAAGC,IAAU,YAAA,UAAA,UAAA,KAAA,EAEjCK,EAAAA,IAAuBE,eAEvBD,EAAOA,IAAiB,OAC5BA,EAAAE,GAAA,WAEAH,EAAAE,YAAAD,CAAA,EAESV,CAJT,CAGA,SAKIJ,qBAAAf,GAJAkB,GAAI,CAACC,EAAkBE,EAASG,GAAeP,cAAc,EAU7D1C,EAAcuD,YAAYX,mBAAiBnB,CAAA,CAAA,EAJ3CqB,EAAQS,YAAYN,CAAW,EAE/BL,EAAiBW,YAAYT,CAAO,EAEpC9C,cAAcuD,YAAYX,CAAgB,CAC9C,CAGAV,eAAe","file":"main.min.js","sourcesContent":["//Get Elements\nconst catsContainer = document.getElementById('cats-container');\n\nconst API_KEY = \"live_DPgbJpjNWbrAu2xinnvSziQZAJeXyee7x7Adouk6C54t7VrGFoeYgey1lUqFWub8\";\n\n//Make Request\nasync function fetchWithTimeout(resource, options = {}) {\n    try {\n        const {timeout = 8000} = options;\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=> controller.abort , timeout);\n        const response = await fetch(resource, { ...options, signal: controller.signal });\n        clearTimeout(timeoutId);\n        return response.json();\n    } catch (error) {\n        console.error('Error fetching cats:', error);\n        //TODO:request recovery\n    }\n}\n\n//Get Cats Data\nasync function fetchCatsData() {\n    try {\n        const response = await fetchWithTimeout(`https://api.thecatapi.com/v1/images/search?limit=8&breed_ids=beng&api_key=${API_KEY}`, 'get', {timeout: 6000});\n        console.log(response);\n        return response;\n    } catch (error) {\n        console.error('Error fetching cats:', error);\n    }\n}\n\n//Load cats images\nfunction loadCatImage(url) {\n    return new Promise((resolve, reject) => {\n        const image = new Image();\n        image.src = url;\n        image.onload = () => resolve(image);\n        image.onerror = () => reject(new Error(`Failed to load image from ${url}`));\n    });\n}\n\nasync function loadCatsImages() {\n    try {\n        const cats = await fetchCatsData(); //(3) [{…}, {…}, {…}]{breads: [{weight, id, name}], url}\n        const imagesPromises = cats.map((cat) => loadCatImage(cat.url));\n        const images = await Promise.allSettled(imagesPromises);\n        images.forEach(image => createCatCardElement(image.value));\n    } catch (error) {\n        console.error(error);\n    } \n}\n\n\n//Create HTML Elements\nfunction createCatCard() {\n    let catCardContainer = document.createElement('div');\n    catCardContainer.classList.add('col-lg-3', 'col-md-6', 'mb-4', 'mb-lg-0', 'mt-4');\n\n    let catCard = document.createElement('div');\n    catCard.classList.add('card', 'shadow-sm', 'border-0', 'rounded', 'h-100', 'mh-100');\n\n    let catCardBody = document.createElement('div');\n    catCardBody.classList.add('card-body', 'p-0');\n\n    return [catCardContainer, catCard, catCardBody]; \n}\n\nfunction createCatCardImage(catCardImage) {\n    catCardImage.classList.add('img-fluid', 'd-inline-block', 'w-100', 'h-100', 'mw-100', 'mh-100','card-img-top');\n    catCardImage.alt = 'meow';\n\n    return catCardImage;\n}\n\nfunction createcatCardActionIcon() {\n    let catCardActionContainer = document.createElement('div');\n    catCardActionContainer.classList.add('p-4');\n\n    let catCardActionIcon = new Image(20, 20);\n    catCardActionIcon.classList.add('img-fluid', 'd-block', 'mx-auto', 'm-3');\n    catCardActionIcon.src = 'img/meow.png';\n    catCardActionIcon.alt = 'meow';\n    catCardActionIcon.id = 'voteIcon';\n\n    catCardActionContainer.appendChild(catCardActionIcon);\n\n    return catCardActionIcon;\n}\n\n//Append all elements to HTML\nfunction createCatCardElement(url) {\n    let [catCardContainer, catCard, catCardBody] = createCatCard();\n    // let catCardActionIcon = createcatCardActionIcon();\n\n    catCardBody.appendChild(createCatCardImage(url));\n    // catCardBody.appendChild(catCardActionIcon);\n\n    catCard.appendChild(catCardBody);\n\n    catCardContainer.appendChild(catCard);\n\n    catsContainer.appendChild(catCardContainer);\n}\n\n\nloadCatsImages();\n\n\n"]}